# Grok è”ç½‘æœç´¢ (astrbot_plugin_grok_web_search)

é€šè¿‡ Grok API è¿›è¡Œå®æ—¶è”ç½‘æœç´¢ï¼Œè¿”å›ç»¼åˆç­”æ¡ˆå’Œæ¥æºé“¾æ¥ã€‚

## ç¯å¢ƒè¦æ±‚

| ä¾èµ– | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜ |
|------|----------|------|
| Python | >= 3.10 | |
| AstrBot | >= v4.9.2 | åŸºç¡€åŠŸèƒ½ï¼ˆæŒ‡ä»¤ + LLM Toolï¼‰ |
| AstrBot | >= v4.13.2 | ä½¿ç”¨ Skill åŠŸèƒ½ |

## åŠŸèƒ½

- `/grok` æŒ‡ä»¤ - ç›´æ¥æ‰§è¡Œæœç´¢
- LLM Tool (`grok_web_search`) - ä¾› LLM è‡ªåŠ¨è°ƒç”¨çš„å‡½æ•°å·¥å…·
- Skill è„šæœ¬ - å¯å®‰è£…åˆ° skills ç›®å½•ä¾› LLM è„šæœ¬è°ƒç”¨

## å®‰è£…

1. åœ¨ AstrBot æ’ä»¶å¸‚åœºæœç´¢ `Grokè”ç½‘æœç´¢` æˆ–æ‰‹åŠ¨å…‹éš†åˆ° `data/plugins/` ç›®å½•
2. åœ¨ç®¡ç†é¢æ¿é…ç½®å¿…è¦å‚æ•°

## é…ç½®

### ä¾›åº”å•†è®¾ç½®

| é…ç½®é¡¹ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `use_builtin_provider` | bool | å¦ | æ˜¯å¦ä½¿ç”¨ AstrBot è‡ªå¸¦ä¾›åº”å•†ï¼ˆé»˜è®¤: falseï¼‰ |
| `provider` | string | æ¡ä»¶ | é€‰æ‹©å·²é…ç½®çš„ LLM ä¾›åº”å•†ï¼ˆå¯ç”¨è‡ªå¸¦ä¾›åº”å•†æ—¶å¿…å¡«ï¼‰ |
| `model` | string | å¦ | æ¨¡å‹åç§°ï¼ˆé»˜è®¤: grok-4-fastï¼Œå¯ç”¨è‡ªå¸¦ä¾›åº”å•†æ—¶ä½¿ç”¨ä¾›åº”å•†é»˜è®¤æ¨¡å‹ï¼‰ |

### è¿æ¥è®¾ç½®

| é…ç½®é¡¹ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `base_url` | string | æ¡ä»¶ | Grok API ç«¯ç‚¹ URLï¼ˆä½¿ç”¨è‡ªå®šä¹‰ä¾›åº”å•†æ—¶å¿…å¡«ï¼‰ |
| `api_key` | string | æ¡ä»¶ | API å¯†é’¥ï¼ˆä½¿ç”¨è‡ªå®šä¹‰ä¾›åº”å•†æ—¶å¿…å¡«ï¼‰ |
| `timeout_seconds` | int | å¦ | è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤: 60 ç§’ï¼‰ |
| `reuse_session` | bool | å¦ | æ˜¯å¦å¤ç”¨ HTTP ä¼šè¯ï¼ˆé«˜é¢‘è°ƒç”¨åœºæ™¯å¯å¼€å¯ï¼Œé»˜è®¤: falseï¼‰ |

### è¡Œä¸ºè®¾ç½®

| é…ç½®é¡¹ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `enable_thinking` | bool | å¦ | æ˜¯å¦å¼€å¯æ€è€ƒæ¨¡å¼ï¼ˆé»˜è®¤: trueï¼‰ |
| `thinking_budget` | int | å¦ | æ€è€ƒ token é¢„ç®—ï¼ˆé»˜è®¤: 32000ï¼‰ |
| `max_retries` | int | å¦ | æœ€å¤§é‡è¯•æ¬¡æ•°ï¼ˆé»˜è®¤: 3ï¼‰ |
| `retry_delay` | float | å¦ | é‡è¯•é—´éš”æ—¶é—´ï¼ˆé»˜è®¤: 1 ç§’ï¼ŒèŒƒå›´ 0.1-5 ç§’ï¼‰ |
| `retryable_status_codes` | list | å¦ | å¯é‡è¯•çš„ HTTP çŠ¶æ€ç ï¼ˆé»˜è®¤: [429, 500, 502, 503, 504]ï¼‰ |

### è¾“å‡ºè®¾ç½®

| é…ç½®é¡¹ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `show_sources` | bool | å¦ | æ˜¯å¦æ˜¾ç¤ºæ¥æº URLï¼ˆé»˜è®¤: falseï¼‰ |
| `max_sources` | int | å¦ | æœ€å¤§è¿”å›æ¥æºæ•°é‡ï¼Œ0 è¡¨ç¤ºä¸é™åˆ¶ï¼ˆé»˜è®¤: 5ï¼‰ |
| `custom_system_prompt` | text | å¦ | è‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯ï¼ˆç•™ç©ºä½¿ç”¨é»˜è®¤æç¤ºè¯ï¼‰ |

### Skill è®¾ç½®

| é…ç½®é¡¹ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `enable_skill` | bool | å¦ | æ˜¯å¦å®‰è£… Skill åˆ° skills ç›®å½•ï¼ˆå¯ç”¨åå°†ç¦ç”¨ LLM Toolï¼‰ |

### HTTP æ‰©å±•

| é…ç½®é¡¹ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|--------|------|------|------|
| `extra_body` | JSON | å¦ | é¢å¤–è¯·æ±‚ä½“å‚æ•° |
| `extra_headers` | JSON | å¦ | é¢å¤–è¯·æ±‚å¤´ |

## ä½¿ç”¨

### æŒ‡ä»¤

```
/grok Python 3.12 æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§
/grok æœ€æ–°çš„ AI æ–°é—»
/grok help              # æ˜¾ç¤ºå¸®åŠ©å’Œå½“å‰é…ç½®çŠ¶æ€
```

> `/grok help` ä¼šæ˜¾ç¤ºå½“å‰ä¾›åº”å•†æ¥æºã€æ¨¡å‹ã€ç³»ç»Ÿæç¤ºè¯ç±»å‹ç­‰é…ç½®ä¿¡æ¯ã€‚

### é‡è¯•æœºåˆ¶

- `/grok` æŒ‡ä»¤å¯ç”¨è‡ªåŠ¨é‡è¯•åŠŸèƒ½ï¼Œä½¿ç”¨çº¿æ€§é€€é¿ç­–ç•¥ï¼ˆ`retry_delay * é‡è¯•æ¬¡æ•°`ï¼‰
- LLM Tool ä¸è‡ªåŠ¨é‡è¯•ï¼Œå¤±è´¥ç«‹å³è¿”å›ï¼Œç”± AI è‡ªè¡Œå†³å®šæ˜¯å¦é‡æ–°è°ƒç”¨
- é‡è¯•ä»…å¯¹è‡ªå®šä¹‰ HTTP å®¢æˆ·ç«¯é€šè¿‡ `retryable_status_codes` åŒ¹é…çŠ¶æ€ç 
- ä½¿ç”¨ AstrBot è‡ªå¸¦ä¾›åº”å•†æ—¶ï¼Œé‡‡ç”¨å¼‚å¸¸é‡è¯•æœºåˆ¶ï¼ˆä¸å— `retryable_status_codes` é™åˆ¶ï¼‰

### LLM Tool

å½“ LLM éœ€è¦æœç´¢å®æ—¶ä¿¡æ¯æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ `grok_web_search` å·¥å…·ã€‚

### Skill

å¼€å¯ `enable_skill` åï¼Œä¼šå®‰è£… Skill åˆ° `data/skills/grok-search/`ï¼ŒLLM å¯è¯»å– SKILL.md åæ‰§è¡Œè„šæœ¬ã€‚

## è¾“å‡ºç¤ºä¾‹

```
Python 3.12 çš„ä¸»è¦æ–°ç‰¹æ€§åŒ…æ‹¬:

1. æ›´å¥½çš„é”™è¯¯æ¶ˆæ¯ - æ”¹è¿›äº†è¯­æ³•é”™è¯¯æç¤º
2. ç±»å‹å‚æ•°è¯­æ³• - æ”¯æŒæ³›å‹ç±»å‹å‚æ•°
3. æ€§èƒ½æå‡ - è§£é‡Šå™¨å¯åŠ¨æ›´å¿«

æ¥æº:
  1. Python 3.12 Release Notes
     https://docs.python.org/3/whatsnew/3.12.html
  2. ...

(è€—æ—¶: 2345ms)
```

## é¡¹ç›®ç»“æ„

```
astrbot_plugin_grok_web_search/
â”œâ”€â”€ main.py              # æ’ä»¶ä¸»å…¥å£
â”œâ”€â”€ grok_client.py       # Grok API å¼‚æ­¥å®¢æˆ·ç«¯
â”œâ”€â”€ metadata.yaml        # æ’ä»¶å…ƒæ•°æ®
â”œâ”€â”€ _conf_schema.json    # é…ç½®é¡¹ Schema
â”œâ”€â”€ README.md
â””â”€â”€ skill/               # Skill è„šæœ¬ï¼ˆé¦–æ¬¡è¿è¡Œåè¿ç§»åˆ° plugin_dataï¼‰
    â”œâ”€â”€ SKILL.md         # Skill è¯´æ˜æ–‡æ¡£
    â””â”€â”€ scripts/
        â””â”€â”€ grok_search.py  # ç‹¬ç«‹æœç´¢è„šæœ¬ï¼ˆä»…æ ‡å‡†åº“ï¼‰
```

## è‡´è°¢

æœ¬æ’ä»¶åŸºäº [grok-skill](https://github.com/Frankieli123/grok-skill) é¡¹ç›®æ”¹é€ ï¼Œæ„Ÿè°¢åŸä½œè€… [@a3180623](https://linux.do/u/a3180623/summary) çš„è´¡çŒ®ã€‚

## æ›´æ–°æ—¥å¿—

æŸ¥çœ‹ [CHANGELOG.md](CHANGELOG.md) äº†è§£ç‰ˆæœ¬æ›´æ–°å†å²ã€‚

## æ”¯æŒ

- [AstrBot æ’ä»¶å¼€å‘æ–‡æ¡£](https://docs.astrbot.app/dev/star/plugin-new.html)
- [Issues](https://github.com/piexian/astrbot_plugin_grok_web_search/issues)

## ğŸ”— ç›¸å…³é“¾æ¥
- [AstrBot](https://docs.astrbot.app/)
- [grok2api](https://github.com/chenyme/grok2api) 

## è®¸å¯

AGPL-3.0 License
